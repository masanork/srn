---
title: "Roadmap: Technical Status & Future Evolution"
layout: article
description: "SRNプロジェクトにおける技術的到達点、確定した実装方針、および次世代仕様（v2.0）へのロードマップ。"
---

SRNプロジェクトは、高精度なタイポグラフィとポスト量子暗号（PQC）を組み合わせた新しいドキュメント基盤の概念実証（PoC）を超え、実運用を見据えた標準化フェーズに移行しています。
本書では、現在の実装状況と、次世代標準スタック（SRN v2.0）に向けて確定した開発方針（Policy）を記します。具体的な実装タスクの進捗については、プロジェクト直下の `todo.md` を参照してください。

## 1. アイデンティティと信頼の基点 (Trust Anchor)

### did:web への完全移行 【Implemented】
*   **状況**: 従来のビルドごとの使い捨てIDモデルから、ドメインに紐付いた永続的な識別子である **`did:web`** への移行を完了しました。
*   **方針**: 信頼の基点をWebPKI（DNS/TLS）に置くことで、既存のインターネットインフラを活用した検証可能性を確保します。ビルドごとの一時鍵は、DID Document (`/.well-known/did.json`) の `verificationMethod` として自動登録され、履歴と信頼の連鎖を担保します。

### ルート鍵の多層管理 【Policy Set】
*   **課題**: 現在のルート鍵はビルドサーバー上の隔離環境に保管されています。
*   **方針 (v2.x)**: 真の「Root Key」をオフライン（HSM/KMS）に置き、ビルドプロセスに対しては期限付きの「Delegated Key（委託鍵）」を発行する2階層モデルを導入します。

### 署名主体の階層構造：自治体個別署名 vs 中央集中署名 【Policy Discussion】
*   **論点**: 各自治体（発行体）が個別に秘密鍵・DIDを運用する「分散モデル」と、国や中央機関（J-LIS等）が署名を代行する「集中モデル」の選択。
*   **背景**: 先例として、JPKI（公的個人認証）や新型コロナワクチン接種証明書では、発行の事実は個別の主体（市町村等）に帰属しつつも、技術的な署名付与は中央の検証可能な仕組みに集約されていました。
*   **検討要件**: 真正性の検証方法さえ確立（Trust Registryの統合等）されていれば、署名処理自体は中央が受託する方が、検証者（Verifier）側の鍵管理コストを抑制できるメリットがあります。一方で、各自治体が「自らの鍵で自らの意思を表明する」という自治権・主体性の担保を、技術的な「委譲（Delegation）」や「共同署名」の仕組みでいかに解決するかが今後の重要な議論点です。

## 2. デジタル情報の真正性 (Verifiably Authenticity)

### 分散型証明書 (W3C VC 2.0) への準拠 【Ongoing】
*   **状況**: 現在は W3C VC v1.1 準拠の JSON-LD 形式を採用しています。
*   **方針**: W3C VC Data Model v2.0 の本勧告に向け、コンテキスト定義の刷新と、JOSE (JWT/JWP) / COSE を用いた「Enveloping（包み込み）署名方式」への移行を進めます。

### 失効管理の自動化 (Revocation)
*   **状況**: ビルド単位での一括失効（Status List 2021プロファイル）をサポート。
*   **方針**: 大規模運用に向けて、文書（VC）単位でのピンポイント失効を可能にするビットストリング方式への完全準拠と、分散型レジストリ（DID Document内へのリスト埋め込み等）の活用を検討します。

### スキーマによる構造と意味の検証 (Credential Schema) 【Policy Set / Research】
*   **課題**: 署名によりデータの改竄は防げますが、そのデータの「構造（必須項目の有無等）」や「データの意味」が発行体の意図通りであるかを第三者が客観的に検証する手段が不足しています。
*   **方針**: W3C VC 2.0 の `credentialSchema` プロパティを採用し、JSON Schema による構造バリデーションを導入します。また、セマンティックな意味定義については、デジタル庁の「ベースレジストリ語彙集」や国際標準（ISO/IEC 18013-5等）とのマッピングを進めます。
*   **規格と表記のコンフリクト（意味的真正性 vs 表記的真正性）**: 
    *   **論点**: 現在の実装は『住民記録システム標準仕様書』に忠実に、個人番号を「全角」で、年月日を「元号表記」でエンコードしています。これは視覚的な再現性を重視した結果ですが、JSON/CBORとしての機械可読性や、グローバルなスキーマ検証（ISO 8601等）の観点からは非効率な側面があります。
    *   **検討方針**: 
        1.  **正規化データの保持**: 内部データ（VCのClaims）は、半角数字や ISO 8601 形式の「正規化（Canonical）フォーマット」で保持。
        2.  **実行時の変換 (Transform on Render)**: レンダリングエンジン側で日本の法令・指針に基づく形式（全角化、元号変換）に展開する。
    *   **課題**: ただし、「元号表記そのものが署名対象であるべき（変換プロセスに曖昧さを残さない）」という法務的な要求がある場合、表記そのままを原本データとすべきという議論もあり、行政実務と技術的合理性の閾値を定める必要があります。
*   **ガバナンス**: スキーマファイル自体も `did:web` の支配下（例：`/.well-known/schemas/`）で公開し、ドメインの信頼性と紐付けることで、スキーマ自身の改竄やなりすましを防止します。

## 3. レンダリングの完全整合性 (Presentation Integrity)

### ネイティブ IVS ハンドリング 【Implemented】
*   **状況**: OpenType Cmap Format 14 の直接注入により、文字置換（PUA）なしでのネイティブな異体字レンダリングを実現しました。これにより、HTMLとしてのセマンティックな妥当性と検索性が100%維持されます。

### 表示構造の真正性担保：VC主導レンダリング (WYSIWYS) 【Implemented】
*   **状況**: 「レンダリング済みHTMLのハッシュ」のみならず、**「署名されたVCデータのみをソースとしてHTMLを構築する」** データ駆動型レンダリングを実装しました（WYSIWYS: What You See Is What You Sign）。
*   **効果**: 備考欄や届出日を含む全項目をVCに論理的にマッピングし、表示がVCの内容と1対1で対応することを技術的に強制しています。これにより、目視した内容とデジタル原本の一致が論理的にも数学的にも保証されます。

## 4. セキュリティとプライバシー (Privacy & Delivery)

### 選択的開示 (Selective Disclosure) 【Policy Set / Research】
*   **課題**: 静的なVC配信では、一部の項目（例：生年月日のみ）を証明したい場合でも、全データを開示する必要があります。
*   **方針**: SD-JWT (IETF) または **SD-CWT (CBOR)** をベースとした属性分離署名の実装を計画しています。検証者に対し、必要な項目とそのソルト（Salt）のみを提示することで、プライバシーを保護しつつデータの真正性を証明します。
*   **技術的論点**: 
    *   **OSS互換性**: SD-JWT自体はIETFで標準化が進んでおり、JavaScript/TypeScriptでも OSS実装（`@sd-jwt/core` 等）が普及し始めています。基本的なクレームのハッシュ化ロジックはこれらを活用可能です。
    *   **独自仕様の必要性**: 一方で、本プロジェクトの核である **「ハイブリッド署名（Ed25519 + ML-DSA）」** をSD-JWT/SD-CWTのコンテクストで扱う公式な組み合わせ（Alg値等）は、標準化団体でも議論の途上にあります。したがって、SD符号化は標準に従いつつ、その「エンベロープ（包み込み）とハイブリッド署名の結合」部分は、現時点ではSRN独自の技術仕様（v2.x先行実装）とする必要があります。
*   **事務・運用上の論点（制度への適合）**:
    *   **事務処理要領との整合性**: 住民票における「一部事項証明」や「個人番号の記載有無」の判断基準は、**『住民基本台帳事務処理要領』** に基づく厳格な運用が求められます。
    *   **開示レベルの標準化**: システム側で任意の項目をセレクティブにできる一方、法令上「不完全な証明書」とみなされないための開示セット（例：世帯全員分セット、本人分限定セット、個人番号あり/なし等）を通達等に基づき定義する必要があります。
    *   **印刷物の効力否定（総務省通知 001018493号等）**: 
        *   **要件**: デジタル交付される住民票の情報は、Verifiable Presentation (VP) として提示・検証されたもののみが法的に有効な「写し」として機能します。
        *   **原則**: 利用者がブラウザ画面やPDFを個人的に印刷したものは、偽造防止技術（地紋等）を欠くため、住民票の写しとして通用しません。
        *   **実装**: ドキュメント上に「印刷物無効」の旨を明示し、印刷時にはその警告がより強調される、あるいは内容が判読不能になる等の「物理コピー防止」策の検討が必要です。


### ホルダー・バインディング (Holder Binding)
*   **状況**: 目前の課題として、Passkeys (WebAuthn) との連携を重視しています。
*   **方針**: デバイス内のセキュアエレメントに格納された秘密鍵で提示（VP形式）を生成することで、「コピーされたVCのなりすまし」を防止し、所持者と情報を強固に紐付けます。

## 5. 次世代トランスポート (Binary & Post-Quantum)

### ハイブリッド PQC 署名 (Ed25519 + ML-DSA) 【Implemented】
*   **状況**: 既存の楕円曲線暗号と、最新の格子暗号（ML-DSA-44）を組み合わせた二重署名モデルを既に運用しています。

### 高効率バイナリ転送 (COSE/CBOR) 【Implemented】
*   **状況**: PQC署名はデータサイズが肥大化しがちです。これに対し、CBOR (RFC 8949) ベースの **COSE_Sign1** 形式の実装を完了しました。
*   **効果**: 従来のJSON-LD形式（約10KB）と比較し、バイナリ形式では約4.5KBまでデータサイズを削減。HTMLの `data-vc-bin` 属性への直接埋め込みにより、PQCの高い安全性と転送効率の両立を実現しています。

### 構成要素としてのデザイン：タイポグラフィと信頼性 【Policy Set】
*   **知見**: 行政ドキュメントのデジタル化において、フォントの品質は単なる装飾ではなく「発行体の権威と信頼性（Authority）」を視覚的に担保する重要な要素であることが再確認されました。
*   **方針**: トップページ等の広報・解説エリアにおいても、Noto Sans JP 等の高品位フォントを採用し、プロダクト全体の「プロフェッショナルな品質」を維持します。これにより、検証者や利用者が「正当な発行主体によるドキュメントである」と直感的に認識できるデザイン・エンジニアリングを追求します。

---
*SRN v2.0 Roadmap - Updated at 2025-12-22*
