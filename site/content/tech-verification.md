---
title: "技術情報: VC検証について"
layout: article
---

このサイトで公開されている一部の公式文書（Official Layoutを使用しているページ）は、**耐量子暗号 (Post-Quantum Cryptography, PQC)** 技術を用いたVerifiable Credential (VC) として発行されています。

これは、将来的な量子コンピュータの実用化においても改ざん耐性を維持するための実験的な取り組みです。

## インラインSVGグリフ表示デモ

フォントファイルから直接グリフを抽出してSVGとして表示しています（コードポイント未割り当て文字などの表示用）。

*   **斎 (MJ030062)**: [ipamjm:MJ030062]
*   **辺 (MJ026194)**: [ipamjm:MJ026194]
*   **甲骨文字 (GJ000001)**: [acgjm:GJ000001]


## 技術仕様

### ハイブリッド署名

現在の認証基盤との互換性を保ちつつ、未来の脅威に備えるため、以下の2つのアルゴリズムによる**ハイブリッド署名**を採用しています。

1.  **Ed25519**: 
    *   現在広く普及している公開鍵暗号方式。
    *   高速で短い鍵サイズが特徴。
    *   既存の多くのVC検証ツールで認識可能です。

2.  **ML-DSA-44 (Dilithium)**:
    *   NIST（米国国立標準技術研究所）によって標準化が進められている耐量子署名アルゴリズムの一つ。
    *   格子暗号に基づいており、量子コンピュータによる攻撃に対して耐性を持つと考えられています。
    *   本システムでは `@noble/post-quantum` ライブラリを使用しています。

### VC構造

発行されるVC（JSONファイル）は、`proof` プロパティに2つの署名オブジェクトを含んでいます。

```json
"proof": [
  {
    "type": "Ed25519Signature2020",
    "verificationMethod": "did:key:...",
    "proofValue": "..."  // Ed25519による署名値
  },
  {
    "type": "DataIntegrityProof",
    "cryptosuite": "ml-dsa-44-2025",
    "verificationMethod": "did:key:...",
    "proofValue": "..."  // ML-DSA-44による署名値
  }
]
```

## 検証方法

### 検証のロジック

検証を行うには、以下の手順が必要です。

1.  **ペイロードの取得**: `proof` プロパティを除いたJSONオブジェクトを取得します。
2.  **正準化 (Canonicalization)**: 
    *   現在の実装では、簡易的なJSON文字列化（`JSON.stringify`）を用いています（実験的実装のため）。
    *   将来的には URDNA2015 などの標準的な正準化アルゴリズムへの準拠を予定しています。
3.  **署名検証**:
    *   **Ed25519**: `verificationMethod` に含まれる公開鍵を用いて検証します。
    *   **ML-DSA-44**: PQC対応のライブラリ（例: `@noble/post-quantum`）を用いて、同様に公開鍵で署名を検証します。

### 開発者向け情報

このサイトのビルドシステム (`src/vc.ts`) はオープンソースとして公開されています。
詳細な実装ロジックについては、リポジトリ内のコードを参照してください。

現在の実装はConcept Proof段階であり、鍵管理はエフェメラル（ビルドごとに生成）な鍵を用いています。永続的なアイデンティティ証明として使用する場合は、鍵の永続化とDID (Decentralized Identifier) の適切な管理が必要です。
